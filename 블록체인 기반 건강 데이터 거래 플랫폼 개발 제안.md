# 블록체인 기반 건강 데이터 거래 플랫폼 개발 제안

## 1. 프로젝트 개요

사용자께서 제공해주신 문서를 바탕으로, 제안된 '블록체인 기반 건강 데이터 거래 플랫폼'의 핵심 목표와 요구사항을 다음과 같이 분석했습니다. 이 프로젝트의 핵심은 환자가 자신의 건강 데이터에 대한 주권을 가지고, 연구기관이나 병원 등 데이터 수요자에게 안전하고 투명하게 데이터를 제공하며, 그에 대한 합당한 보상을 받는 생태계를 구축하는 것입니다.

### 1.1. 문제 정의

*   **데이터 수요자 (연구기관/병원):** 연구 및 임상 활용을 위한 고품질의 건강 데이터 확보에 어려움을 겪습니다.
*   **데이터 제공자 (환자/보호자):** 자신의 민감한 건강 정보가 '언제, 누구에게, 어떤 목적으로, 얼마나' 제공되는지 통제하기 어렵고, 데이터 제공에 대한 보상 체계가 부재합니다.

### 1.2. 해결 방안

제시된 해결 방안은 **XRPL(XRP Ledger) 블록체인**을 활용하여 데이터 거래의 **동의, 지불, 감사추적** 과정을 투명하고 자동화하는 데 중점을 둡니다. 핵심적인 설계 원칙은 다음과 같습니다.

> 헬스 데이터는 오프체인(FHIR 번들)로 암호화 저장, 온체인은 동의 상태 + 지불 에스크로 + 감사추적 해시만 남긴다. (PHI 온체인 금지)

이는 개인의 민감한 건강 정보(PHI)를 블록체인에 직접 저장하지 않음으로써, 개인정보보호규정(PIPA, HIPAA 등)을 준수하고 데이터 주권을 강화하는 매우 중요한 접근 방식입니다.

## 2. 핵심 기능 및 기술 스택

프로젝트의 주요 기능과 이를 구현하기 위한 기술 스택을 아래와 같이 정리했습니다.

| 구분 | 핵심 기능 | 주요 기술 및 표준 | 설명 |
| :--- | :--- | :--- | :--- |
| **신원 및 동의** | 환자 계정 생성 및 관리 | XRPL 계정, DID(탈중앙화 신원증명) | 사용자의 신원을 블록체인 상에서 관리합니다. |
| | 데이터 제공 동의 관리 | W3C Verifiable Credential (VC) 2.0 | '수집 범위/보유기간/제3자/철회권' 등을 포함한 동의서를 VC 형태로 발급 및 검증합니다. |
| **데이터 관리** | 건강 데이터 표준화 | FHIR (Fast Healthcare Interoperability Resources) | 건강 데이터를 표준 형식(Bundle)으로 패키징하여 상호운용성을 확보합니다. |
| **지불 및 정산** | 안전한 대금 결제 | XRPL Escrow | 조건부(PREIMAGE-SHA-256) 및 만기 설정이 가능한 에스크로를 통해 데이터 전달과 대금 지급을 자동화합니다. |
| **감사 추적** | 거래 기록 및 검증 | XRPL Memos | 거래(Transaction)의 메모(Memos) 필드에 VC ID, FHIR 번들 해시 등 메타데이터를 기록하여 모든 과정을 추적 및 검증할 수 있도록 합니다. |

## 3. 개발 방향 및 단계별 구현 계획

제공된 문서의 '해커톤용 핵심 기획'과 '구현 체크리스트'를 바탕으로, 실질적인 프로토타입을 개발하기 위한 단계별 계획을 제안합니다. 초기 단계에서는 가장 핵심적인 기능의 동작을 증명하는 데 집중합니다.

### 1단계: 핵심 시나리오(MVP) 개발

가장 먼저, 아래의 단일 사용자 스토리를 완성하여 프로젝트의 핵심 가치를 증명하는 최소 기능 제품(MVP)을 개발합니다.

> **"연구기관이 데이터 제공을 제안(Offer)하고, 환자가 이에 동의하면, 데이터가 안전하게 전달되고 자동으로 정산받는 과정"**

**개발 목표:**
1.  **XRPL 테스트넷 환경 구축:** 연구기관과 환자 역할을 할 2개의 테스트넷 계정을 생성합니다.
2.  **핵심 기능 구현:**
    *   **결제 흐름:** `EscrowCreate` (대금 잠금) → `EscrowFinish` (자동 정산)으로 이어지는 과정을 구현합니다.
    *   **동의 증명:** VC 2.0 형식의 JSON 동의서를 로컬에서 발급하고, 해당 VC의 ID를 XRPL 트랜잭션 메모에 기록합니다.
    *   **데이터 참조:** 샘플 FHIR Bundle(JSON)을 생성하고, 이 번들의 해시(SHA-256) 값을 계산하여 트랜잭션 메모에 기록합니다.
3.  **간단한 프론트엔드 구현:** 사용자가 '오퍼 카드 확인 → 동의 → 데이터 제출'의 과정을 직접 경험할 수 있는 최소한의 웹 인터페이스를 제공합니다.

### 2단계: 기능 고도화

MVP 개발 이후, 다음과 같은 가산점 기능들을 추가하여 서비스의 완성도와 신뢰도를 높일 수 있습니다.

*   **동의 NFT(XLS-20):** 데이터 접근 권한을 라이선스 형태의 NFT로 발급하여 권리 증표 및 감사 용도로 활용합니다.
*   **오퍼 자동 매칭:** 특정 조건(나이, 병력 등)에 맞는 환자에게 오퍼가 자동으로 매칭되는 규칙을 개발합니다.
*   **EVM 사이드체인 연동:** 복잡한 계약 로직(수수료 분배, 클레임 등)이 필요할 경우, XRPL EVM 사이드체인에 스마트 컨트랙트를 배포하고 메인넷과 연동하는 방안을 검토합니다.

## 4. 제안 및 다음 단계

먼저 **1단계: 핵심 시나리오(MVP) 개발**에 집중할 것을 제안합니다. 이를 통해 최소한의 자원으로 프로젝트의 기술적 실현 가능성과 핵심 비즈니스 모델을 검증할 수 있습니다. 

이 개발 방향에 동의하시면, 바로 XRPL 테스트넷 환경 설정 및 핵심 기능 구현을 시작하겠습니다. 제안 내용에 대해 다른 의견이나 추가하고 싶으신 부분이 있다면 편하게 말씀해주십시오.

